/**!
 * Author: Ape Sack
 * Copyright: Ape Sack 2023
 * Version: 1.0.0
 */
function e(e){let t="";const n=parseFloat(e);return console.log("checkGain ",n),t=n>1?"Gain":0===n||1===n?"Break Even":n<1?"Loss":"ERROR",t}function t(t){const n=new Date(Date.now()-31536e6*t).toISOString().slice(0,10),o=`btc-price-${t}y-ago`;return fetch(`https://api.coinbase.com/v2/prices/BTC-USD/spot?date=${n}`).then((e=>e.json())).then((n=>{const c=Number(n.data.amount);document.getElementById(o).innerHTML=`<b>BTC price ${t} years ago: </b>$`+c.toLocaleString("en-US");const i=document.getElementById("btc-price"),a=Number(i.textContent.replace("$","").replace(",","")),r=((a-c)/c*100).toFixed(0),l=(a/c).toFixed(1);console.log("xGain",l),console.log("todayPrice = ",a,"price = ",c);const s=`btc-gain-${t}y-ago`;document.getElementById(s).innerHTML=`<b>${e(l)}:</b> ${r}%, ${l} times`})).catch((e=>{console.error(e)}))}function n(){fetch("https://api.coinbase.com/v2/prices/BTC-USD/spot").then((e=>e.json())).then((e=>{document.getElementById("btc-price").textContent="$"+Number(e.data.amount).toLocaleString("en-US");for(let e=1;e<=5;e++){const n=`<div class="my-btc-history" id="${`btc-price-${e}y-ago`}"></div>`;document.getElementById("btc-prices").insertAdjacentHTML("beforeend",n);const o=`<div class="my-gain" id="${`btc-gain-${e}y-ago`}"></div><br>`;document.getElementById("btc-prices").insertAdjacentHTML("beforeend",o),t(e)}})).catch((e=>{console.error(e)}));const e=new Date,n=e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),o=e.toLocaleTimeString("en-US");document.getElementById("last-updated").textContent=`${n} at ${o}`}function o(){fetch("https://colintalkscrypto.com/cbbi/data/latest.json").then((e=>e.json())).then((e=>{const t=e.Confidence,n=Object.keys(t).sort(),o=t[n[n.length-1]];fetch("https://api.alternative.me/fng/").then((e=>e.json())).then((e=>{const t=e.data[0].value,n=document.getElementById("weight-slider"),c=(100-n.value)/100,i=1-c,a=Math.round(o*i*100+t*c);console.log("myCBBI = "+o+" myFNG = ",t),n.addEventListener("input",(function(){const e=(100-n.value)/100,c=1-e,i=Math.round(o*c*100+t*e);document.getElementById("composite-index").textContent=`${i}`,document.getElementById("ratio").textContent=`CBBI: ${(100*c).toFixed(0)}% FNG: ${(100*e).toFixed(0)}%`})),document.getElementById("composite-index").textContent=`${a}`,document.getElementById("ratio").textContent=`CBBI: ${(100*i).toFixed(0)}% FNG: ${(100*c).toFixed(0)}%`})).catch((e=>console.error(e)))})).catch((e=>console.error(e)))}function c(){fetch("https://blockchain.info/q/getblockcount").then((e=>e.text())).then((e=>{e=parseInt(e),console.log("blockHeight = ",e);const t=21e4,n=t-e%t;console.log("blocksRemaining = ",n);const o=10*n/60/24;console.log("daysRemaining = ",o);console;const c=new Date(Date.now()+24*o*60*60*1e3),i=100*(1-n/t);console.log("percentBlocksDone ",i),document.getElementById("bitcoin-halving-result").innerHTML="<br><b>Days remaining:</b> "+Math.floor(o)+"<br><b>% to next halving:</b> "+i.toFixed(0)+"%<br><b>Next halving date: </b>"+c.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})).catch((e=>{console.log(e),document.getElementById("bitcoin-halving-result").innerHTML="An error occurred while retrieving the current block height."}))}function i(){fetch("https://colintalkscrypto.com/cbbi/data/latest.json").then((e=>e.json())).then((e=>{const t=e.Confidence,n=Object.keys(t).sort(),o=t[n[n.length-1]],c=Math.round(100*o);document.getElementById("colins-btc-bullrun-index").textContent=`${c}`})).catch((e=>console.error(e)))}function a(){fetch("https://api.alternative.me/fng/").then((e=>e.json())).then((e=>{const t=e.data[0].value,n=e.data[0].value_classification;document.getElementById("fear-n-greed-index").textContent=t+" - "+n})).catch((e=>console.error(e)))}n(),o(),c(),i(),a();